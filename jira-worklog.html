<script>
    const DFLT_RANGE_IN_DAYS = 15

    let jiraHost = localStorage.getItem("jiraHost")

    if (jiraHost == undefined){
        jiraHost = prompt("Please enter the Jira Host address. For example: mycompany.atlassian.net")
    }

    localStorage.setItem("jiraHost", jiraHost)

    const reportRangeInDays = DFLT_RANGE_IN_DAYS


    const todayDateObj = new Date()

    const endDate = todayDateObj.toISOString().split("T")[0]
    let startDateObj = new Date()
    startDateObj.setDate(startDateObj.getDate() - parseInt(reportRangeInDays))

    const startDate = startDateObj.toISOString().split("T")[0]

    window.location = `https://${jiraHost}/plugins/servlet/ac/jira-timesheet-plugin/timereports#!showWeekends=true&startDate=${startDate}&endDate=${endDate}`
</script>